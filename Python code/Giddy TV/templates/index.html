<!DOCTYPE html>
<html lang="en">
<head>
  <title>Giddy TV</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="static/main.css">

</head>
<body>
<script>
function update_values(){
	/*$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	$.getJSON($SCRIPT_ROOT+"/_stuff",
		function(data) {
			//$("#Users").text(data.Users+" %")
			//$("#Projects").text(data.Projects+" %")
		});*/
	var deferredData = new jQuery.Deferred();

    $.ajax({
        type: "GET",
        url: "/ajax",
        dataType: "json",
        success: function(data) { 
            deferredData.resolve(data);
            },
        complete: function(xhr, textStatus) {
            console.log("AJAX Request complete -> ", xhr, " -> ", textStatus);
            }
    });
	console.log("updated values!");
	console.log(deferredData);
	setTimeout(update_values,9500);
}
</script>

<script>
	$(document).ready(
		function(){
			$(".Welcome").hide();
		}
	);
</script>

<!--<div class="container">-->
<div class="row" id="Main">
  <div class="col-sm-3">
  <!-- Vertical Carousel -->
	<h1>Feed</h1>
	<hr>
    <div id="myCarousel" class="carousel slide vertical" data-ride="carousel">
		<!--wrapper for slides-->
		<div class="carousel-inner" role="listbox">
			<div class="item active">
				<p style="text-align:center"><img src="static\Giddy.PNG" alt="Giddy" width="55%"></p>
				<h3 align="center">Update Title</h3>
				<h2 style="color:#f6ce00; text-align:center;">Project Title</h2>
				<hr>
				<h2>Details</h2>
			</div>
			
			<!--
			{% for i in range(Projects|length) %}
				{% if Projects[i].updates|length != 0 %}
				<div class="item active">
					<p style="text-align:center"><img src={{Projects[0].getUpdate(0).getImage(0)}} alt="Update Image" width="100%"></p>
					<h3 align="center">{{Projects[0].getUpdate(0).getName()}}</h3>
					<h2 style="color:#f6ce00; text-align:center;">{{Projects[0].getTitle()}}</h2>
					<hr>
					<h2>{{Projects[0].getUpdate(0).getDetail()}}</h2>
				</div>
				{% endif %}
			{% endfor %}
			-->
			
			{% for i in range(Projects|length) %}
				{% for j in range(Projects[i].updates|length) %}
					{% if Projects[i].getUpdate(j).getImage(0) is not none and Projects[i].getImage() != '' %}
					<div class="item">
						<p style="text-align:center"><img src={{Projects[i].getUpdate(j).getImage(0)}} alt="Update Image" width="100%"></p>
						<h3 align="center">{{Projects[i].getUpdate(j).getName()}}</h3>
						<h2 style="color:#f6ce00; text-align:center;">{{Projects[i].getTitle()}}</h2>
						<hr>
						<h2>{{Projects[i].getUpdate(j).getDetail()}}</h2>
					</div>
					{% endif %}
				{% endfor %}
			{% endfor %}
		</div>
	</div>
  </div>
  <!--<script>setTimeout(update_values,1000);</script>-->
  
  <!-- Horizontal Carousel -->
  <div class="col-sm-6">
	<h1>Maker Space</h1>
	<hr>
	<div id="myCarousel" class="carousel slide" data-ride="carousel">
	  <!-- Wrapper for slides -->
	  <div class="carousel-inner" role="listbox">
		
		<!--First Slide-->
		<div class="item active">
			<div class="crop"><img src="static\wallpaper.png" alt="Wallpaper" width="100%"></div>
			<!--<img src="assets\Giddy.PNG" width="30%">-->
			<h3>Howdy!</h3>
			<h2>Welcome to the FirstBuild Maker Space! Where imagination meets reality.</h2>
		</div>
		
		<!--Remaining Slides-->
		{% for i in range(Projects|length) %}
			{% if Projects[i].getImage() is not none and Projects[i].getImage() != '' %}
			<div class="item">
				<div class="crop"><img src= {{Projects[i].getImage()}} alt="Image" width="100%"></div>
				<h3>{{Projects[i].getTitle()}}</h3>
				<h2>{{Projects[i].getDetail()}}</h2>
				<hr>
				<div class="row">
					{% for j in range(Projects[i].team|length) %}
						<div class="col-md-2" style="text-align:center">
							<img src={{Projects[i].getMember(j).getImage()}} width="100%">
							<p>@{{Projects[i].getMember(j).getUsername()}}</p>
						</div>
					{% endfor %}
				</div>
			</div>
			{% endif %}
		{% endfor %}
	  
	  </div>
	</div>
  </div>

  <!-- Vertical Carousel -->
  <div class="col-sm-3">
	<h1>Who's Who</h1>
	<hr>
	<div id="myCarousel" class="carousel slide vertical" data-ride="carousel">
		<!--wrapper for slides-->
		<div class="carousel-inner" role="listbox">
			
			<div class="item active">
				<p style="text-align:center"><img src="static\Giddy.PNG" alt="Giddy" width="55%"></p>
				<h3 align="center">Giddy Card</h3>
				<hr>
				<h2 style="color:#f6ce00">Skills</h2>
				<ul><li>Skilles are listed here</li></ul>
				<h2 style="color:#f6ce00">Projects</h2>
				<ul><li>Projects are listed here</li></ul>
			</div>
			
			{% for i in range(Users|length) %}
			<div class="item">
				<p style="text-align:center"><img src= {{Users[i].getImage()}} alt="Image" width="55%"></p>
				<p align="center">@{{Users[i].getUsername()}}</p>
				<h3 align="center">{{Users[i].getName()}}</h3>
				<hr>
				<h2 style="color:#f6ce00">Skills</h2>
				<ul>
					{% for j in range(Users[i].skills|length) %}
						<li>{{Users[i].getSkill(j).getTitle()}} - <span style="color:#cf0060">level {{Users[i].getSkill(j).getLevel()}}</span></li>
					{% endfor %}
				</ul>
				<h2 style="color:#f6ce00">Projects</h2>
				<ul>
					{% for k in range(Users[i].projects|length) %}
						<li>{{Users[i].getProject(k).getTitle()}}</li>
					{% endfor %}
				</ul>
			</div>
			{% endfor %}
	  </div>
	</div>
  </div>
  <!--<h2>This app is a work in progress. Have a suggestion? Let us know on Slack at #GiddyTV</h2>-->
</div>
<!--</div>-->

<!--Welcome Screen-->
<div class="Welcome">
	<img style="margin-top:15%" src="static\Giddy.PNG" alt="Giddy" width="25%">
	<h3 style="font-size:50pt; margin-bottom:15%">Welcome [User's full name]!</h3>
</div>

</body>
</html>